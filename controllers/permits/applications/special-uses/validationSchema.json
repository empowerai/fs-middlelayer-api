{
    "tempOutfitterPermit":{
        "id":"tempOutfitterPermit",
        "type":"object",
        "allOf":[
            { "$ref": "topLevelFieldsBase"},
            {
                "properties":{
                    "applicantInfo": {
                        "$ref": "tempOutfitterApplicantInfo"
                    },
                    "type": {
                        "type": "string", 
                        "default": "tempOutfitterGuide",
                        "enum":[
                            "noncommercial",
                            "tempOutfitterGuide"
                        ]
                    },
                    "tempOutfitterFields": {
                        "$ref": "tempOutfitterFields"
                    }
                },
                "required": ["applicantInfo", "type", "tempOutfitterFields"]
            }
        ]
    },
    "tempOutfitterApplicantInfo": {
        "id": "/tempOutfitterApplicantInfo",
        "type": "object",
        "allOf":[
            {"$ref":"applicantInfoBase"},
            {
                "properties": {
                    "organizationName": { "type": "string"},
                    "orgType":{
                        "type":"string",
                        "description":"Organization Type",
                        "enum":[
                            "Individual",
                            "Corporation",
                            "Limited Liability Company",
                            "Partnership or Association",
                            "State Government or Agency",
                            "Local Government or Agency",
                            "Nonprofit"
                        ]
                    }
                },
                "required":["orgType"]
            }
        ]

    },
    "tempOutfitterFields": {
        "id": "/tempOutfitterFields",
        "type": "object",
        "allOf":[
            {"$ref":"extraFieldsBase"},
            {
                "properties": {
                    "insuranceCertificate": { "type": "string"},
                    "goodStandingEvidence": {
                        "description": "Certificate of good standing, operating agreement, or other evidence the business is in good standing",
                        "type": "string"
                    },
                    "operatingPlan": {
                        "description": "A completed Word or RTF operating plan template.",
                        "type": "string"
                    }
                },
                "required": ["insuranceCertificate", "goodStandingEvidence", "operatingPlan"]
                }
        ]

    },
    "noncommercial": {
        "id":"noncommercialPermit",
        "type":"object",
        "allOf":[
            { "$ref": "topLevelFieldsBase"},
            {
                "properties":{
                    "applicantInfo": {
                        "$ref": "applicantInfoNoncommercial"
                    },
                    "type": {
                        "type": "string", 
                        "default": "noncommercial",
                        "enum":[
                            "noncommercial",
                            "tempOutfitterGuide"
                        ]
                    },
                    "noncommercialFields": {
                        "$ref": "noncommercialFields"
                    }
                },
                "required": ["applicantInfo", "type", "noncommercialFields"]
            }
        ]
    },
    "noncommercialApplicantInfo": {
        "id": "/applicantInfoNoncommercial",
        "type": "object",
        "allOf":[
            {"$ref":"applicantInfoBase"},
            { 
                "properties": {
                    "organizationName": { "type": "string"},
                    "orgType":{
                        "type":"string",
                        "description":"Organization Type",
                        "enum":[
                            "Individual",
                            "Corporation",
                            "Limited Liability Company",
                            "Partnership or Association",
                            "State Government or Agency",
                            "Local Government or Agency",
                            "Nonprofit"
                        ]
                    }
                },
                "dependencies":{
                    "organizationName":["orgType"]
                }
            }
        ]

    },
    "noncommercialFields": {
        "id": "/noncommercialFields",
        "type": "object",
        "allOf":[
            {"$ref":"extraFieldsBase"},
            {
                "properties": {
                    "numberParticipants": { "type": "integer"}
                },
                "required": ["numberParticipants"]
            }
        ]
    },
    "phoneNumber": {
        "id": "/phoneNumber",
        "type": "object",
        "properties": {
            "areaCode": { 
                "type": "integer",
                "format": "areaCodeFormat"
            },
            "number": {
                "type": "integer",
                "format": "phoneNumberFormat"
            },
            "extension": { "type": "integer"},
            "type": {"type": "string"}
        },
        "required": ["areaCode", "number", "type"]

    },
    "applicantInfoBase":{
        "id":"/applicantInfoBase",
        "type":"object",
        "properties":{
            "firstName": { "type": "string" },
            "lastName": { "type": "string" },
            "dayPhone": { "$ref": "phoneNumber" },
            "eveningPhone": { "$ref": "phoneNumber" },
            "emailAddress": {
                "type": "string",
                "pattern":"^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$"},
            "mailingAddress": { "type": "string" },
            "mailingAddress2": { "type": "string" },
            "mailingCity": { "type": "string" },
            "mailingState": {
                "type": "string",
                "pattern":"^(A[EKLPRSZ]|C[AOT]|D[CE]|F[LM]|G[AU]|HI|I[ADLN]|K[SY]|LA|M[ADEHINOPST]|N[CDEHVJMY]|O[HKR]|P[ARW]|RI|S[CD]|T[NX]|UT|V[AIT]|W[AIVY])$"
            },
            "mailingZIP": { 
                "type": "integer",
                "format":"zipFormat"
            },
            "website":{"type": "string"}
        },
        "required": ["firstName", "lastName", "dayPhone", "emailAddress", "mailingAddress", "mailingCity", "mailingZIP", "mailingState"]
    },
    "extraFieldsBase":{
        "id":"/extraFieldsBase",
        "type":"object",
        "properties":{
            "activityDescription": { "type": "string"},
            "locationDescription": {  "type": "string"},
            "startDateTime": {
                "type": "string",
                "pattern":"^(19|20)\\d\\d-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])T(0\\d|1\\d|2[0-3]):(0\\d|1\\d|2[0-3]):(0\\d|1\\d|2[0-3])Z$"
            },
            "endDateTime": {
                "type": "string",
                "pattern":"^(19|20)\\d\\d-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])T(0\\d|1\\d|2[0-3]):(0\\d|1\\d|2[0-3]):(0\\d|1\\d|2[0-3])Z$"
            }
        },
        "required": ["activityDescription", "locationDescription", "startDateTime", "endDateTime"]
    },
    "topLevelFieldsBase":{
        "id":"/topLevelFieldsBase",
        "type":"object",
        "properties":{
            "region": { 
                "type" : "integer",
                "format": "regionFormat"
            },
            "forest": {
                "type" : "integer",
                "format": "forestFormat"
            },
            "district": {
                "type" : "integer",
                "format": "districtFormat"
            },
            "authorizingOfficerName": { "type" : "string"},
            "authorizingOfficerTitle": { "type" : "string"}
        },
        "required": ["region", "forest", "district"]
    }

}
